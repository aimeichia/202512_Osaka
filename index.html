<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¬é˜ªæ™šç§‹æ‚ é–’è³æ¥“è¡Œç¨‹ (12/6 - 12/8)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px; 
            max-height: 400px; 
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        /* Custom Scrollbar for itinerary list */
        .scroller::-webkit-scrollbar { width: 6px; }
        .scroller::-webkit-scrollbar-track { background: #f1f1f1; }
        .scroller::-webkit-scrollbar-thumb { background: #d97706; border-radius: 3px; }
        .scroller::-webkit-scrollbar-thumb:hover { background: #b45309; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .active-tab { border-bottom: 3px solid #b91c1c; color: #b91c1c; font-weight: 700; }
        .inactive-tab { color: #78716c; }
        .timeline-item.active { border-left-color: #b91c1c; background-color: #fff7ed; }
    </style>
    <!-- Chosen Palette: Late Autumn (Warm Amber, Deep Red, Slate Grey, Cream Background) -->
    <!-- Application Structure Plan: 
         1. Header: Quick summary of dates, theme, and accommodation.
         2. Dashboard Overview: Visualizations of the trip pace (Activity vs Transport vs Food) to set expectations.
         3. Interactive Tabbed Itinerary: The core navigation. Users switch between Day 1, 2, 3, and Tips.
         4. Split View Content:
            - Left: Vertical Timeline (clickable).
            - Right: Dynamic Detail Card (updates on click). Shows specific transport commands, tips, and context.
         5. Logic: Vanilla JS handles state (current day, selected event) and updates DOM/Charts. 
         Rationale: This structure separates the "When" (Timeline) from the "How/What" (Details), preventing information overload on a mobile screen while keeping all details accessible. 
    -->
    <!-- Visualization & Content Choices: 
         1. Time Allocation Donut Chart: Shows the balance of the trip (Relaxed vs Active). Goal: Inform. Lib: Chart.js.
         2. Daily Intensity Bar Chart: Estimates 'fatigue' or activity level per day. Goal: Compare. Lib: Chart.js.
         3. Interactive Timeline: HTML list with JS click handlers. Goal: Organize flow.
         4. Dynamic Info Panels: JS text injection. Goal: Contextual details without clutter.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. 
    -->
</head>
<body class="bg-orange-50 text-stone-800 flex flex-col min-h-screen">

    <!-- Header Section -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-red-800">ğŸ äº¬é˜ªæ™šç§‹æ‚ é–’è³æ¥“è¡Œ</h1>
                <p class="text-sm text-stone-500">2025/12/06 - 12/08 | å¤§é˜ª & äº¬éƒ½</p>
            </div>
            <div class="mt-2 md:mt-0 text-right text-xs md:text-sm text-stone-600 bg-stone-100 px-3 py-1 rounded-lg">
                ğŸ¨ ä½å®¿: Comfort Hotel Osaka Shinsaibashi
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-5xl mx-auto w-full px-4 py-6 space-y-8">

        <!-- Intro / Dashboard Section -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in">
            <div class="space-y-4">
                <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-amber-500">
                    <h2 class="text-xl font-bold text-stone-800 mb-2">æ—…ç¨‹æ¦‚è¦½</h2>
                    <p class="text-stone-600 leading-relaxed">
                        é€™æ˜¯ä¸€è¶Ÿè¿½å°‹ã€Œæœ€å¾Œç´…è‘‰ã€èˆ‡ã€Œå‹é‹ã€çš„æ—…ç¨‹ã€‚ç¬¬ä¸€å¤©æ–°å¢äº†è¶…äººæ°£çš„**å‹å°¾å¯º**ï¼ˆç¥ˆæ±‚å‹é‹çš„é”æ‘©å¯ºï¼‰ï¼Œåˆ©ç”¨æ–°é–‹é€šçš„åœ°éµç›´é”ç·šè¼•é¬†å‰å¾€ã€‚ç¬¬äºŒå¤©å°ˆæ³¨æ–¼äº¬éƒ½æ™šæ¥“èˆ‡å¤œé–“é»ç‡ˆï¼Œè¡Œç¨‹è±å¯Œè€Œä¸ç·Šæ¹Šã€‚
                    </p>
                    <div class="mt-4 flex gap-2 overflow-x-auto pb-2">
                        <span class="px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold whitespace-nowrap">ğŸ¯ å‹å°¾å¯ºé”æ‘©</span>
                        <span class="px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-semibold whitespace-nowrap">ğŸ æ™šæ¥“é™å®š</span>
                        <span class="px-3 py-1 bg-stone-100 text-stone-700 rounded-full text-xs font-semibold whitespace-nowrap">ğŸš¶ è¼•é¬†æ…¢è¡Œ</span>
                        <span class="px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold whitespace-nowrap">ğŸŒ™ å¤œé–“é»ç‡ˆ</span>
                    </div>
                </div>
                <!-- Stat Cards -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded-xl shadow-sm text-center">
                        <div class="text-2xl">ğŸŒ¡ï¸</div>
                        <div class="text-sm font-bold text-stone-600">æ°£æº«é æ¸¬</div>
                        <div class="text-xs text-stone-500">5Â°C - 12Â°C (éœ€ä¿æš–)</div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm text-center">
                        <div class="text-2xl">ğŸš†</div>
                        <div class="text-sm font-bold text-stone-600">ä¸»è¦äº¤é€š</div>
                        <div class="text-xs text-stone-500">å¾¡å ‚ç­‹ç·šãƒ»äº¬é˜ªãƒ»å—æµ·</div>
                    </div>
                </div>
            </div>

            <!-- Visualizations -->
            <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-center">
                <h3 class="text-sm font-bold text-stone-500 mb-4 text-center">è¡Œç¨‹æ™‚é–“åˆ†é…åˆ†æ</h3>
                <div class="chart-container">
                    <canvas id="tripDistributionChart"></canvas>
                </div>
                <p class="text-xs text-center text-stone-400 mt-2">åŸºæ–¼æ´»å‹•é¡å‹ä¼°ç®—çš„æ™‚é–“æ¯”ä¾‹</p>
            </div>
        </section>

        <!-- Main Interaction Area: Itinerary -->
        <section class="bg-white rounded-2xl shadow-lg overflow-hidden border border-stone-100">
            <!-- Tabs -->
            <div class="flex border-b border-stone-200 overflow-x-auto">
                <button onclick="switchTab('day1')" id="tab-day1" class="flex-1 py-4 px-6 text-center transition-colors active-tab hover:bg-stone-50 whitespace-nowrap">
                    Day 1 <span class="text-xs block font-normal text-stone-500">12/6 å‹é‹é”æ‘©</span>
                </button>
                <button onclick="switchTab('day2')" id="tab-day2" class="flex-1 py-4 px-6 text-center transition-colors inactive-tab hover:bg-stone-50 whitespace-nowrap">
                    Day 2 <span class="text-xs block font-normal text-stone-500">12/7 äº¬éƒ½æ™šæ¥“</span>
                </button>
                <button onclick="switchTab('day3')" id="tab-day3" class="flex-1 py-4 px-6 text-center transition-colors inactive-tab hover:bg-stone-50 whitespace-nowrap">
                    Day 3 <span class="text-xs block font-normal text-stone-500">12/8 æ‚ é–’è¿”ç¨‹</span>
                </button>
                <button onclick="switchTab('tips')" id="tab-tips" class="flex-1 py-4 px-6 text-center transition-colors inactive-tab hover:bg-stone-50 whitespace-nowrap">
                    ğŸ’¡ äº¤é€šèˆ‡æ”»ç•¥
                </button>
            </div>

            <!-- Content Area -->
            <div class="p-0 md:p-6 bg-stone-50 min-h-[500px]">
                
                <!-- Day Views (1, 2, 3) -->
                <div id="day-content" class="grid grid-cols-1 lg:grid-cols-12 gap-6 h-full">
                    <!-- Left: Timeline List -->
                    <div class="lg:col-span-5 bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden flex flex-col h-[500px] lg:h-auto">
                        <div class="p-3 bg-stone-100 border-b border-stone-200 font-semibold text-stone-700 flex justify-between items-center">
                            <span>è¡Œç¨‹æ™‚é–“è»¸</span>
                            <span class="text-xs font-normal text-stone-500">é»æ“ŠæŸ¥çœ‹è©³æƒ…</span>
                        </div>
                        <div id="timeline-list" class="overflow-y-auto flex-grow scroller p-2 space-y-2">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- Right: Details Panel -->
                    <div class="lg:col-span-7 flex flex-col">
                        <div id="detail-card" class="bg-white rounded-xl shadow-sm border border-stone-200 p-6 flex-grow flex flex-col justify-center items-center text-center transition-all duration-300">
                            <div class="text-stone-300 text-6xl mb-4">ğŸ‘ˆ</div>
                            <h3 class="text-xl font-bold text-stone-400">é¸æ“‡å·¦å´è¡Œç¨‹æŸ¥çœ‹è©³æƒ…</h3>
                            <p class="text-stone-400 mt-2">æŸ¥çœ‹è©³ç´°äº¤é€šæ–¹å¼ã€æ™¯é»äº®é»èˆ‡å»ºè­°</p>
                        </div>
                    </div>
                </div>

                <!-- Tips View -->
                <div id="tips-content" class="hidden space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-blue-500">
                            <h3 class="font-bold text-lg mb-3 flex items-center">ğŸš† äº¤é€šå°æ’‡æ­¥</h3>
                            <ul class="space-y-2 text-stone-600 text-sm">
                                <li class="flex items-start"><span class="mr-2">âœ…</span> <strong>å‹å°¾å¯ºäº¤é€šï¼š</strong>æ­åœ°éµå¾¡å ‚ç­‹ç·šï¼ˆå¾€åƒé‡Œä¸­å¤®/ç®•é¢è±é‡æ–¹å‘ï¼‰ç›´é”çµ‚é»ã€Œç®•é¢è±é‡ã€ï¼Œå†è½‰ä¹˜å…¬è»Šç´„20åˆ†ã€‚</li>
                                <li class="flex items-start"><span class="mr-2">âœ…</span> <strong>äº¬é˜ªé›»è»Šï¼š</strong>Day 2 å»äº¬éƒ½å»ºè­°æ­äº¬é˜ªç‰¹æ€¥ï¼ˆåŠ è³¼ Premium Car æŒ‡å®šå¸­ï¼‰ï¼Œå¾æ·€å±‹æ©‹ç›´é”å‡ºç”ºæŸ³ï¼Œèˆ’é©åˆæ–¹ä¾¿ã€‚</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-red-500">
                            <h3 class="font-bold text-lg mb-3 flex items-center">ğŸ ç´…è‘‰ç¾æ³èˆ‡ç©¿è‘—</h3>
                            <ul class="space-y-2 text-stone-600 text-sm">
                                <li class="flex items-start"><span class="mr-2">ğŸ‚</span> 12æœˆåˆç´…è‘‰å·²å…¥å°¾è²ï¼Œä½†å‹å°¾å¯ºä½æ–¼å±±å€ï¼Œå¯èƒ½é‚„æœ‰äº›è¨±ç´…è‘‰ï¼Œä¸»è¦çœ‹é»æ˜¯æ»¿å±±éé‡çš„ã€Œé”æ‘©ã€ã€‚</li>
                                <li class="flex items-start"><span class="mr-2">ğŸ§¥</span> å‹å°¾å¯ºåœ¨å±±ä¸Šï¼Œæ°£æº«æ¯”å¸‚å€ä½3-5åº¦ï¼Œ<strong>å‹™å¿…æ”œå¸¶ä¿æš–è¡£ç‰©</strong>ã€‚</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4 text-center">Day 1 å‹å°¾å¯ºäº¤é€šåœ–è§£</h3>
                        <div class="flex flex-col md:flex-row items-center justify-center text-sm text-stone-600 space-y-4 md:space-y-0 gap-4">
                            <div class="bg-stone-100 p-3 rounded text-center w-full md:w-auto">
                                <div class="font-bold text-stone-800">å¿ƒé½‹æ©‹ç«™</div>
                                <div class="text-xs">å¾¡å ‚ç­‹ç·š</div>
                            </div>
                            <div class="text-2xl text-stone-400">â”</div>
                            <div class="bg-red-50 p-3 rounded text-center w-full md:w-auto border border-red-200">
                                <div class="font-bold text-red-800">ç®•é¢è±é‡ç«™</div>
                                <div class="text-xs">çµ‚é»ç«™ä¸‹è»Š</div>
                            </div>
                            <div class="text-2xl text-stone-400">â”</div>
                            <div class="bg-blue-50 p-3 rounded text-center w-full md:w-auto border border-blue-200">
                                <div class="font-bold text-blue-800">å…¬è»Š/è¨ˆç¨‹è»Š</div>
                                <div class="text-xs">ç´„20åˆ†é˜</div>
                            </div>
                            <div class="text-2xl text-stone-400">â”</div>
                            <div class="bg-amber-50 p-3 rounded text-center w-full md:w-auto border border-amber-200">
                                <div class="font-bold text-amber-800">å‹å°¾å¯º</div>
                                <div class="text-xs">é”æ‘©è–åœ°</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-800 text-stone-400 py-8 mt-auto">
        <div class="max-w-5xl mx-auto px-4 text-center text-sm">
            <p>Designed for Relaxed Travel | Late Autumn 2025</p>
        </div>
    </footer>

    <script>
        // --- Data ---
        const itineraryData = {
            day1: [
                { time: "06:00", icon: "ğŸ›¬", title: "æŠµé”é—œè¥¿æ©Ÿå ´ (KIX)", type: "transport", desc: "è¾¦ç†å…¥å¢ƒæ‰‹çºŒã€é ˜å–è¡Œæã€‚", transport: "ç„¡", tips: "è¨˜å¾—åœ¨æ©Ÿå ´é ˜å–é è¨‚çš„ç¶²å¡æˆ– ICOCA å¡ã€‚" },
                { time: "07:30", icon: "ğŸš†", title: "å‰å¾€å¤§é˜ªé›£æ³¢", type: "transport", desc: "æ­ä¹˜ç‰¹æ€¥ Rapi:t å‰å¾€å¸‚å€ã€‚", transport: "å—æµ·é›»éµ ç‰¹æ€¥ Rapi:t (ç´„38åˆ†)", tips: "åº§ä½èˆ’é©ï¼Œé©åˆå‰›ä¸‹é£›æ©Ÿè£œçœ ã€‚" },
                { time: "08:30", icon: "ğŸ¨", title: "é£¯åº—å¯„æ”¾è¡Œæ", type: "logistic", desc: "Comfort Hotel Osaka Shinsaibashi", transport: "æ­¥è¡Œ 15-20åˆ† æˆ– åœ°éµ1ç«™", tips: "å¾å—æµ·é›£æ³¢ç«™èµ°éå»ç´„15-20åˆ†ï¼Œè‹¥è¡Œæé‡å¯æ­åœ°éµå¾¡å ‚ç­‹ç·šè‡³å¿ƒé½‹æ©‹ç«™ã€‚" },
                { time: "09:00", icon: "ğŸš‡", title: "å‰å¾€å‹å°¾å¯º (äº¤é€š)", type: "transport", desc: "æ­åœ°éµå¾¡å ‚ç­‹ç·šç›´é”ã€Œç®•é¢è±é‡ã€ï¼Œè½‰ä¹˜å…¬è»Šã€‚", transport: "å¾¡å ‚ç­‹ç·š (å¾€ç®•é¢è±é‡) + é˜ªæ€¥å·´å£«", tips: "å¾å¿ƒé½‹æ©‹ç›´é”ç®•é¢è±é‡ç´„35åˆ†ã€‚å‡ºç«™å¾Œæ­ä¹˜å¾€å‹å°¾å¯ºçš„å·´å£« (ç´„20åˆ†)ã€‚" },
                { time: "10:30", icon: "ğŸ¯", title: "å‹å°¾å¯º (å‹é‹ä¹‹å¯º)", type: "highlight", desc: "æ»¿å±±éé‡çš„é”æ‘©ä¸å€’ç¿ï¼Œç¥ˆæ±‚å‹é‹çš„èƒ½é‡æ™¯é»ã€‚", transport: "æ­¥è¡Œåƒæ‹œ", tips: "å¿…æ‹ï¼šé”æ‘©ç‰†ã€å±±é–€å€’å½±ã€‚è¨˜å¾—è²·å€‹é”æ‘©è¨±é¡˜ï¼" },
                { time: "13:00", icon: "ğŸ±", title: "åˆé¤ï¼šç®•é¢ Q's Mall", type: "food", desc: "è¿”å›ç®•é¢è±é‡ç«™ï¼Œåœ¨è³¼ç‰©ä¸­å¿ƒç”¨é¤ã€‚", transport: "å·´å£«è¿”å›ç®•é¢è±é‡", tips: "æ–°é–‹å¹•çš„å•†å ´ï¼Œé¸æ“‡å¤šæ¨£ï¼Œç”¨é¤ç’°å¢ƒèˆ’é©ã€‚" },
                { time: "15:00", icon: "ğŸ¯", title: "å¤§é˜ªåŸå…¬åœ’ (å½ˆæ€§)", type: "sightseeing", desc: "è‹¥æœ‰é«”åŠ›å¯å‰å¾€ï¼Œæ¬£è³éŠ€æå¤§é“ã€‚", transport: "å¾¡å ‚ç­‹ç·š -> ä¸­å¤®ç·š (æ£®ä¹‹å®®ç«™)", tips: "å¦‚æœç´¯äº†ï¼Œå¯ä»¥ç›´æ¥å›å¿ƒé½‹æ©‹é€›è¡—æˆ–å›é£¯åº—ä¼‘æ¯ã€‚" },
                { time: "17:30", icon: "ğŸ¦€", title: "é“é “å €æ™šé¤", type: "food", desc: "å¤§é˜ªç‡’ã€æ‹‰éºµã€å›ºåŠ›æœè·‘è·‘äººã€‚", transport: "åœ°éµ/æ­¥è¡Œ", tips: "æ™šä¸Šå›åˆ°æœ€ç†±é¬§çš„é“é “å €è¦“é£Ÿã€‚" }
            ],
            day2: [
                { time: "08:30", icon: "ğŸšƒ", title: "å‡ºç™¼å‰å¾€äº¬éƒ½", type: "transport", desc: "ä½¿ç”¨äº¬é˜ªé›»è»Šå‰å¾€å‡ºç”ºæŸ³ã€‚", transport: "åœ°éµ(æ·€å±‹æ©‹è½‰) + äº¬é˜ªç‰¹æ€¥ -> å‡ºç”ºæŸ³", tips: "äº¬é˜ªç‰¹æ€¥ç›´é”ä¸”èˆ’é©ï¼Œå»ºè­°åŠ è³¼ Premium Car æŒ‡å®šå¸­ã€‚" },
                { time: "10:00", icon: "â›©ï¸", title: "ä¸‹é´¨ç¥ç¤¾ & ç³ºä¹‹æ£®", type: "sightseeing", desc: "ã€æ™šç§‹ç´…è‘‰ MVPã€‘äº¬éƒ½ç´…è‘‰æœ€æ™šçš„åœ°æ–¹ã€‚", transport: "æ­¥è¡Œ", tips: "æ¼«æ­¥åœ¨ç³ºä¹‹æ£®çš„åŸå§‹æ£®æ—ä¸­ï¼Œäº«å—æ©˜ç´…è‰²çš„éš§é“ã€‚" },
                { time: "12:30", icon: "ğŸ±", title: "ç¥‡åœ’ / æ²³åŸç”º åˆé¤", type: "food", desc: "äº«ç”¨äº¬æ–™ç†æˆ–é°»é­šé£¯ã€‚", transport: "äº¬é˜ªé›»è»Šï¼šå‡ºç”ºæŸ³ -> ç¥‡åœ’å››æ¢", tips: "æ¨è–¦ç¥‡åœ’é™„è¿‘çš„é¤å»³ï¼Œæ°£æ°›ä½³ã€‚" },
                { time: "14:30", icon: "ğŸµ", title: "èŠ±è¦‹å°è·¯ & å»ºä»å¯º", type: "sightseeing", desc: "æ¢è¨ªäº¬éƒ½æœ€å¤è€ç¦ªå¯ºèˆ‡é¢¨ç¥é›·ç¥åœ–ã€‚", transport: "æ­¥è¡Œ", tips: "å»ºä»å¯ºéŠå®¢ç›¸å°è¼ƒå°‘ï¼Œæ½®éŸ³åº­éå¸¸ç¾ã€‚" },
                { time: "16:30", icon: "ğŸšƒ", title: "ç§»å‹•è‡³æ±ç¦å¯º", type: "transport", desc: "å‰å¾€å¤œé–“é»ç‡ˆæœƒå ´ã€‚", transport: "äº¬é˜ªé›»è»Šï¼šç¥‡åœ’å››æ¢ -> æ±ç¦å¯º (ç´„6åˆ†)", tips: "äº¬é˜ªé›»è»Šç›´é”ï¼Œä¸ç”¨æ›ç·šã€‚" },
                { time: "17:00", icon: "ğŸŒ™", title: "æ±ç¦å¯º å¤œé–“é»ç‡ˆ", type: "highlight", desc: "ã€æœ¬æ—¥é‡é ­æˆ²ã€‘æ´»å‹•æœ€å¾Œä¸€å¤© (12/7)ã€‚", transport: "æ­¥è¡Œå…¥å ´", tips: "é€šå¤©æ©‹ç´…è‘‰åœ¨ç‡ˆå…‰ä¸‹å¦‚é›²æµ·èˆ¬å¤¢å¹»ã€‚æˆ¶å¤–éå¸¸å†·ï¼Œè«‹å‹™å¿…ä¿æš–ã€‚" },
                { time: "19:00", icon: "ğŸ¥˜", title: "é´¨å·æ™šé¤", type: "food", desc: "å…ˆæ–—ç”ºäº«ç”¨å£½å–œç‡’æˆ–äº¬æ–™ç†ã€‚", transport: "äº¬é˜ªé›»è»Šï¼šæ±ç¦å¯º -> ç¥‡åœ’å››æ¢ (æŠ˜è¿”)", tips: "é›–ç„¶æŠ˜è¿”ï¼Œä½†å¸‚å€é¸æ“‡å¤šä¸”èˆ’é©ï¼Œæ¯”åœ¨å¯ºå»Ÿæ—å—å‡å¥½ã€‚" },
                { time: "21:00", icon: "ğŸ”™", title: "è¿”å›å¤§é˜ª", type: "transport", desc: "çµæŸå®Œç¾çš„ä¸€å¤©ã€‚", transport: "äº¬é˜ªé›»è»Š -> æ·€å±‹æ©‹ -> åœ°éµ", tips: "æ³¨æ„æœ«ç­è»Šæ™‚é–“ï¼Œä½†é€šå¸¸äº¬é˜ªé›»è»Šå¾ˆæ™šéƒ½æœ‰è»Šã€‚" }
            ],
            day3: [
                { time: "09:30", icon: "ğŸ£", title: "é»‘é–€å¸‚å ´", type: "food", desc: "è±ªè¯æµ·é®®æ—©åˆé¤ã€‚", transport: "åœ°éµ/æ­¥è¡Œ", tips: "é«”é©—å¤§é˜ªäººçš„å»šæˆ¿ï¼Œæ¨è–¦ç¾çƒ¤å’Œç‰›ä¸²ã€‚" },
                { time: "11:30", icon: "ğŸ¦", title: "é›£æ³¢å…«é˜ªç¥ç¤¾", type: "sightseeing", desc: "å·¨å¤§ç…å­é ­ç¥ç¤¾ã€‚", transport: "æ­¥è¡Œ", tips: "å¸èµ°å„é‹ã€æ‹›ä¾†å¥½é‹ï¼Œé©åˆå›åœ‹å‰åƒæ‹œã€‚" },
                { time: "13:00", icon: "ğŸ›ï¸", title: "é›£æ³¢ Parks / é«˜å³¶å±‹", type: "food", desc: "æœ€å¾Œè³¼ç‰©èˆ‡ç”œé»æ™‚å…‰ã€‚", transport: "æ­¥è¡Œ", tips: "è‹¥ä¸æƒ³é€›è¡—ï¼Œå¯ææ—©å»è‡¨ç©ºåŸ Outletã€‚" },
                { time: "17:00", icon: "ğŸ§³", title: "å›é£¯åº—å–è¡Œæ", type: "logistic", desc: "æ•´ç†æˆ°åˆ©å“ã€‚", transport: "æ­¥è¡Œ", tips: "ç¢ºèªè­·ç…§ã€æ©Ÿç¥¨éƒ½åœ¨èº«ä¸Šã€‚" },
                { time: "17:30", icon: "ğŸš¶", title: "å‰å¾€é›£æ³¢ç«™", type: "transport", desc: "ç§»å‹•è‡³å—æµ·é›»éµç«™ã€‚", transport: "æ­¥è¡Œ", tips: "é ç•™15-20åˆ†é˜èµ°è·¯æ™‚é–“ã€‚" },
                { time: "18:00", icon: "ğŸš…", title: "å‰å¾€é—œè¥¿æ©Ÿå ´", type: "transport", desc: "æ­ä¹˜ç‰¹æ€¥ Rapi:t (18:00æˆ–18:30ç­æ¬¡)ã€‚", transport: "å—æµ·é›»éµ", tips: "ç´„40åˆ†é˜æŠµé”ï¼Œèˆ’é©åˆå¿«é€Ÿã€‚" },
                { time: "18:50", icon: "ğŸ›«", title: "æŠµé”æ©Ÿå ´ (KIX)", type: "logistic", desc: "è¾¦ç†ç™»æ©Ÿæ‰‹çºŒã€‚", transport: "-", tips: "èˆªç­ 20:45 èµ·é£›ã€‚å»ºè­°èµ·é£›å‰2å°æ™‚æŠµé”ã€‚" }
            ]
        };

        // --- State Management ---
        let currentDay = 'day1';
        let selectedEventIndex = 0;

        // --- DOM Elements ---
        const dayContent = document.getElementById('day-content');
        const tipsContent = document.getElementById('tips-content');
        const timelineList = document.getElementById('timeline-list');
        const detailCard = document.getElementById('detail-card');
        const tabs = {
            day1: document.getElementById('tab-day1'),
            day2: document.getElementById('tab-day2'),
            day3: document.getElementById('tab-day3'),
            tips: document.getElementById('tab-tips')
        };

        // --- Initialization ---
        function init() {
            renderCharts();
            renderDay(currentDay);
        }

        // --- Functions ---
        function switchTab(tabId) {
            // Update Tab Styles
            Object.keys(tabs).forEach(key => {
                const tab = tabs[key];
                if (key === tabId) {
                    tab.classList.remove('inactive-tab', 'hover:bg-stone-50');
                    tab.classList.add('active-tab');
                } else {
                    tab.classList.remove('active-tab');
                    tab.classList.add('inactive-tab', 'hover:bg-stone-50');
                }
            });

            // Toggle View
            if (tabId === 'tips') {
                dayContent.classList.add('hidden');
                tipsContent.classList.remove('hidden');
                tipsContent.classList.add('fade-in');
            } else {
                tipsContent.classList.add('hidden');
                dayContent.classList.remove('hidden');
                currentDay = tabId;
                selectedEventIndex = 0; // Reset selection
                renderDay(tabId);
            }
        }

        function renderDay(dayId) {
            const events = itineraryData[dayId];
            timelineList.innerHTML = ''; // Clear list

            events.forEach((event, index) => {
                const item = document.createElement('div');
                item.className = `timeline-item p-4 border-l-4 cursor-pointer hover:bg-stone-50 transition-colors flex items-start gap-3 ${index === 0 ? 'active border-l-red-600 bg-orange-50' : 'border-l-stone-300'}`;
                item.onclick = () => selectEvent(index, dayId);
                
                item.innerHTML = `
                    <div class="font-mono text-sm text-stone-500 min-w-[50px] pt-1">${event.time}</div>
                    <div>
                        <div class="font-bold text-stone-800 text-lg">${event.icon} ${event.title}</div>
                        <div class="text-sm text-stone-500 truncate w-48 md:w-64">${event.desc}</div>
                    </div>
                `;
                timelineList.appendChild(item);
            });

            // Trigger selection of first item
            selectEvent(0, dayId);
        }

        function selectEvent(index, dayId) {
            selectedEventIndex = index;
            const events = itineraryData[dayId];
            const event = events[index];

            // Update List Visuals
            const listItems = timelineList.children;
            for (let i = 0; i < listItems.length; i++) {
                if (i === index) {
                    listItems[i].classList.add('active', 'border-l-red-600', 'bg-orange-50');
                    listItems[i].classList.remove('border-l-stone-300');
                    listItems[i].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                } else {
                    listItems[i].classList.remove('active', 'border-l-red-600', 'bg-orange-50');
                    listItems[i].classList.add('border-l-stone-300');
                }
            }

            // Update Detail Card
            let typeColor = 'bg-stone-100 text-stone-600';
            if (event.type === 'sightseeing') typeColor = 'bg-amber-100 text-amber-800';
            if (event.type === 'food') typeColor = 'bg-orange-100 text-orange-800';
            if (event.type === 'transport') typeColor = 'bg-blue-100 text-blue-800';
            if (event.type === 'highlight') typeColor = 'bg-red-100 text-red-800 border border-red-200';

            detailCard.innerHTML = `
                <div class="w-full h-full flex flex-col items-start text-left animate-fade-in space-y-4">
                    <div class="flex items-center justify-between w-full border-b border-stone-100 pb-2">
                        <span class="text-3xl">${event.icon}</span>
                        <span class="px-3 py-1 rounded-full text-xs font-bold uppercase ${typeColor}">${getCategoryName(event.type)}</span>
                    </div>
                    
                    <div>
                        <h2 class="text-2xl font-bold text-stone-800">${event.title}</h2>
                        <div class="text-lg text-stone-600 mt-1 font-mono">${event.time}</div>
                    </div>

                    <p class="text-stone-700 leading-relaxed text-lg bg-stone-50 p-4 rounded-lg w-full">
                        ${event.desc}
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full mt-2">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                            <h4 class="font-bold text-blue-800 text-sm mb-1">ğŸš† äº¤é€šå»ºè­°</h4>
                            <p class="text-sm text-blue-900">${event.transport}</p>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                            <h4 class="font-bold text-yellow-800 text-sm mb-1">ğŸ’¡ è²¼å¿ƒå°æé†’</h4>
                            <p class="text-sm text-yellow-900">${event.tips}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function getCategoryName(type) {
            const map = {
                'transport': 'äº¤é€šç§»å‹•',
                'sightseeing': 'æ™¯é»è§€å…‰',
                'food': 'ç¾é£Ÿ / è³¼ç‰©',
                'logistic': 'ä½å®¿ / æ©Ÿå ´',
                'highlight': 'è¡Œç¨‹äº®é»'
            };
            return map[type] || 'æ´»å‹•';
        }

        function renderCharts() {
            // Data estimations (Time in hours)
            // Day 1: Transport 2h, Sightseeing 3h, Food/Shop 4h, Rest/Logistics 2h
            // Day 2: Transport 3h, Sightseeing 6h, Food/Shop 3h
            // Day 3: Transport 2h, Sightseeing 1h, Food/Shop 4h, Logistics 2h
            
            const ctxDistribution = document.getElementById('tripDistributionChart').getContext('2d');
            
            new Chart(ctxDistribution, {
                type: 'doughnut',
                data: {
                    labels: ['æ™¯é»è§€å…‰ (éŠ€æ/ç´…è‘‰)', 'äº¤é€šç§»å‹•', 'ç¾é£Ÿè³¼ç‰©', 'ä½å®¿èˆ‡æ©Ÿå ´'],
                    datasets: [{
                        data: [10, 7, 11, 4], // Estimated total hours across 3 days
                        backgroundColor: [
                            '#d97706', // Amber (Sightseeing)
                            '#60a5fa', // Blue (Transport)
                            '#f87171', // Red (Food/Shop)
                            '#a8a29e'  // Stone (Logistics)
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'right', labels: { font: { family: "'Noto Sans TC', sans-serif" } } }
                    }
                }
            });
        }

        // Start
        init();

    </script>
</body>
</html>
