<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¬éƒ½ç´…è‘‰éŠ€æèˆ‡æ¸…é…’ãƒ»ç‰›èˆŒç¾é£Ÿä¹‹æ—… (12/6 - 12/8)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 600px; 
            margin-left: auto; 
            margin-right: auto; 
            height: 300px; 
            max-height: 400px; 
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        /* Custom Scrollbar */
        .scroller::-webkit-scrollbar { width: 6px; }
        .scroller::-webkit-scrollbar-track { background: #f1f1f1; }
        .scroller::-webkit-scrollbar-thumb { background: #b91c1c; border-radius: 3px; }
        .scroller::-webkit-scrollbar-thumb:hover { background: #991b1b; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .active-tab { border-bottom: 3px solid #b91c1c; color: #b91c1c; font-weight: 700; }
        .inactive-tab { color: #78716c; }
        .timeline-item.active { border-left-color: #b91c1c; background-color: #fff7ed; }
    </style>
    <!-- Chosen Palette: Maple Red & Ginkgo Gold -->
</head>
<body class="bg-stone-50 text-stone-800 flex flex-col min-h-screen">

    <!-- Header Section -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-red-800">ğŸ äº¬éƒ½æ¸…é…’å¤œæ¥“ãƒ»å¤§é˜ªç‰›èˆŒä¹‹æ—…</h1>
                <p class="text-sm text-stone-500">2025/12/06 - 12/08 | ä½å››æ¢çƒä¸¸ (Comfort Inn)</p>
            </div>
            <div class="mt-2 md:mt-0 text-right text-xs md:text-sm text-stone-600 bg-stone-100 px-3 py-1 rounded-lg">
                ğŸ’¡ Day 1 æ”¹å»æ°¸è§€å ‚
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-5xl mx-auto w-full px-4 py-6 space-y-8">

        <!-- Intro / Dashboard Section -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in">
            <div class="space-y-4">
                <div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-red-600">
                    <h2 class="text-xl font-bold text-stone-800 mb-2">æ—…ç¨‹æ¦‚è¦½ (V6 æ›´æ–°ç‰ˆ)</h2>
                    <p class="text-stone-600 leading-relaxed">
                        Day 1 æ¶å®Œã€ŒæŒ½è‚‰èˆ‡ç±³ã€æ•´ç†åˆ¸å¾Œï¼Œç›´å¥”ç´…è‘‰ä¹‹ç‹ã€Œæ°¸è§€å ‚ã€èˆ‡ã€Œæ±ç¦å¯ºã€ï¼Œä¸¦åœ¨åé…’é¤¨è²·é…’ã€‚Day 2 æ‚ é–’æ¬£è³æœ¬é¡˜å¯ºéŠ€æèˆ‡äºŒæ¢åŸã€‚Day 3 å‰å¾€å¤§é˜ªåŸèˆ‡é ç´„å¥½çš„ç‰›èˆŒå¤§é¤ã€‚
                    </p>
                    <div class="mt-4 flex gap-2 overflow-x-auto pb-2">
                        <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold whitespace-nowrap">ğŸ¥© æŒ½è‚‰èˆ‡ç±³ãƒ»ç‰›èˆŒæª¸æª¬</span>
                        <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-xs font-semibold whitespace-nowrap">ğŸ æ°¸è§€å ‚ãƒ»æ±ç¦å¯º</span>
                        <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold whitespace-nowrap">ğŸ‚ æœ¬é¡˜å¯ºãƒ»äºŒæ¢åŸ</span>
                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold whitespace-nowrap">ğŸ¶ åé…’é¤¨ãƒ»SAKEå£±</span>
                    </div>
                </div>
                <!-- Stat Cards -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded-xl shadow-sm text-center">
                        <div class="text-2xl">ğŸš…</div>
                        <div class="text-sm font-bold text-stone-600">å»ç¨‹äº¤é€š</div>
                        <div class="text-xs text-stone-500">HARUKA</div>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm text-center">
                        <div class="text-2xl">ğŸšŒ</div>
                        <div class="text-sm font-bold text-stone-600">å›ç¨‹äº¤é€š</div>
                        <div class="text-xs text-stone-500">åˆ©æœ¨æ´¥å·´å£« (æ¢…ç”°ç™¼)</div>
                    </div>
                </div>
            </div>

            <!-- Visualizations -->
            <div class="bg-white p-4 rounded-xl shadow-md flex flex-col justify-center">
                <h3 class="text-sm font-bold text-stone-500 mb-4 text-center">è¡Œç¨‹æ™‚é–“åˆ†é…</h3>
                <div class="chart-container">
                    <canvas id="tripDistributionChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Main Interaction Area: Itinerary -->
        <section class="bg-white rounded-2xl shadow-lg overflow-hidden border border-stone-100">
            <!-- Tabs -->
            <div class="flex border-b border-stone-200 overflow-x-auto">
                <button onclick="switchTab('day1')" id="tab-day1" class="flex-1 py-4 px-6 text-center transition-colors active-tab hover:bg-stone-50 whitespace-nowrap">
                    Day 1 <span class="text-xs block font-normal text-stone-500">12/6 æ°¸è§€å ‚ç´…è‘‰ & ç¾é£Ÿ</span>
                </button>
                <button onclick="switchTab('day2')" id="tab-day2" class="flex-1 py-4 px-6 text-center transition-colors inactive-tab hover:bg-stone-50 whitespace-nowrap">
                    Day 2 <span class="text-xs block font-normal text-stone-500">12/7 éŠ€æèˆ‡äºŒæ¢åŸ</span>
                </button>
                <button onclick="switchTab('day3')" id="tab-day3" class="flex-1 py-4 px-6 text-center transition-colors inactive-tab hover:bg-stone-50 whitespace-nowrap">
                    Day 3 <span class="text-xs block font-normal text-stone-500">12/8 å¤§é˜ªåŸç‰›èˆŒèˆ‡è¿”ç¨‹</span>
                </button>
                <button onclick="switchTab('tips')" id="tab-tips" class="flex-1 py-4 px-6 text-center transition-colors inactive-tab hover:bg-stone-50 whitespace-nowrap">
                    ğŸ’¡ äº¤é€šèˆ‡åº—å®¶è³‡è¨Š
                </button>
            </div>

            <!-- Content Area -->
            <div class="p-0 md:p-6 bg-stone-50 min-h-[500px]">
                
                <!-- Day Views (1, 2, 3) -->
                <div id="day-content" class="grid grid-cols-1 lg:grid-cols-12 gap-6 h-full">
                    <!-- Left: Timeline List -->
                    <div class="lg:col-span-5 bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden flex flex-col h-[500px] lg:h-auto">
                        <div class="p-3 bg-stone-100 border-b border-stone-200 font-semibold text-stone-700 flex justify-between items-center">
                            <span>è¡Œç¨‹æ™‚é–“è»¸</span>
                            <span class="text-xs font-normal text-stone-500">é»æ“ŠæŸ¥çœ‹è©³æƒ…</span>
                        </div>
                        <div id="timeline-list" class="overflow-y-auto flex-grow scroller p-2 space-y-2">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- Right: Details Panel -->
                    <div class="lg:col-span-7 flex flex-col">
                        <div id="detail-card" class="bg-white rounded-xl shadow-sm border border-stone-200 p-6 flex-grow flex flex-col justify-center items-center text-center transition-all duration-300">
                            <div class="text-stone-300 text-6xl mb-4">ğŸ‘ˆ</div>
                            <h3 class="text-xl font-bold text-stone-400">é¸æ“‡å·¦å´è¡Œç¨‹æŸ¥çœ‹è©³æƒ…</h3>
                            <p class="text-stone-400 mt-2">æŸ¥çœ‹è©³ç´°äº¤é€šæ–¹å¼ã€æ™¯é»äº®é»èˆ‡å»ºè­°</p>
                        </div>
                    </div>
                </div>

                <!-- Tips View -->
                <div id="tips-content" class="hidden space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-blue-500">
                            <h3 class="font-bold text-lg mb-3 flex items-center">ğŸ¶ ç¾é£Ÿèˆ‡æ¸…é…’æ”»ç•¥ (æœ€çµ‚ç‰ˆ)</h3>
                            <ul class="text-sm text-stone-700 space-y-4">
                                <li class="p-2 border-b bg-red-50 rounded">
                                    <span class="font-bold text-red-700 block">ğŸ¥© æŒ½è‚‰ã¨ç±³ (äº¬éƒ½)</span>
                                    <span class="text-xs block mb-1">ğŸ“ ç¥‡åœ’</span>
                                    <span class="text-stone-500">Day 1 æ—©ä¸Š 10:00 æ‹¿åˆ¸ã€‚æ‹¿åˆ°åˆ¸å¾Œè‹¥æœ‰ç©ºæª”ï¼Œå¯å…ˆå»é™„è¿‘çš„æ°¸è§€å ‚ã€‚</span>
                                </li>
                                <li class="p-2 border-b">
                                    <span class="font-bold text-blue-700 block">åé…’é¤¨ã‚¿ã‚­ãƒ¢ãƒˆ</span>
                                    <span class="text-xs block mb-1">ğŸ“ äº”æ¢é€š (è¿‘åœ°éµäº”æ¢ç«™)</span>
                                    <span class="text-stone-500">Day 1 åˆé¤å¾Œå‰å¾€ã€‚æœ‰æŠ•å¹£å¼è©¦é£²ï¼Œè²·å®Œé…’ç›´æ¥æ­åœ°éµå›å››æ¢é£¯åº—æ”¾é…’ï¼Œè¶…é †ï¼</span>
                                </li>
                                <li class="p-2 border-b">
                                    <span class="font-bold text-blue-700 block">SAKEå£± (Sake Ichi)</span>
                                    <span class="text-xs block mb-1">ğŸ“ æ²³åŸç”º/æœ¨å±‹ç”º</span>
                                    <span class="text-stone-500">Day 2 æ™šä¸Šå»ã€‚ç«™ç«‹å¼é…’å§ï¼Œé«”é©—ç•¶åœ°æ°›åœã€‚</span>
                                </li>
                                <li class="p-2 bg-yellow-50 rounded">
                                    <span class="font-bold text-yellow-700 block">ğŸ® æ–°å®¿ç„¼è‚‰ ç‰›ãŸã‚“ã®æª¸æª¬ (å¤§é˜ª)</span>
                                    <span class="text-xs block mb-1">ğŸ“ å¤§é˜ªåƒæ—¥å‰</span>
                                    <span class="text-stone-500">Day 3 14:00 å·²é ç´„ã€‚åº—åœ¨ã€Œæ—¥æœ¬ä¸€æ­¯ç§‘ã‚»ãƒ³ã‚¿ãƒ¼ãƒ“ãƒ«ã€1æ¨“ã€‚</span>
                                </li>
                            </ul>
                        </div>

                        <div class="bg-white p-6 rounded-xl shadow-sm border-t-4 border-amber-500">
                            <h3 class="font-bold text-lg mb-3 flex items-center">ğŸš† äº¤é€šé—œéµ (ICOCA ç‚ºä¸»)</h3>
                            <ul class="text-sm text-stone-700 space-y-3">
                                <li>
                                    <span class="font-bold text-amber-700">Day 1 è¶•å ´ï¼š</span>
                                    <br>æŠµé”äº¬éƒ½ç«™ (ç´„08:45) å¾Œï¼Œ**ç›´æ¥æ­è¨ˆç¨‹è»Š**å»é£¯åº—æ”¾è¡Œæï¼Œå†ç›´å¥”ç¥‡åœ’æ‹¿åˆ¸ã€‚é€™æ®µéŒ¢ä¸èƒ½çœã€‚
                                </li>
                                <li>
                                    <span class="font-bold text-amber-700">å¸‚å€ç§»å‹•ï¼š</span>
                                    <br>æ‚¨çš„å¸‚å€ç§»å‹•é›†ä¸­ï¼Œ**å…¨ç¨‹åˆ· ICOCA** çµ•å°æ˜¯æœ€åˆ’ç®—ä¸”æœ€æ–¹ä¾¿çš„é¸æ“‡ã€‚
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-800 text-stone-400 py-8 mt-auto">
        <div class="max-w-5xl mx-auto px-4 text-center text-sm">
            <p>Designed for Relaxed Travel | Late Autumn 2025</p>
        </div>
    </footer>

    <script>
        // --- Data ---
        const itineraryData = {
            day1: [
                { time: "06:00", icon: "ğŸ›¬", title: "æŠµé”é—œè¥¿æ©Ÿå ´ (KIX)", type: "transport", desc: "å…¥å¢ƒã€é ˜è¡Œæã€é ˜å– ICOCA å¡ã€‚", transport: "ç„¡", tips: "è¨˜å¾—åœ¨å°ç£å…ˆè²·å¥½ HARUKA é›»å­ç¥¨ã€‚" },
                { time: "07:30", icon: "ğŸš†", title: "å‰å¾€äº¬éƒ½è»Šç«™", type: "transport", desc: "æ­ä¹˜ JR HARUKA ç‰¹æ€¥ç›´é”äº¬éƒ½ã€‚", transport: "JR HARUKA (ç´„ 75 åˆ†é˜)", tips: "ç´„ 08:45 æŠµé”äº¬éƒ½è»Šç«™ã€‚" },
                { time: "09:00", icon: "ğŸš•", title: "é£¯åº—å¯„æ”¾è¡Œæ", type: "logistic", desc: "Comfort Inn Kyoto Shijokarasuma", transport: "è¨ˆç¨‹è»Š (ç´„ Â¥1,200)", tips: "ç›´æ¥æ­è¨ˆç¨‹è»Šæœ€å¿«ã€‚æ”¾å®Œè¡Œæé¦¬ä¸Šå‡ºç™¼å»ç¥‡åœ’ã€‚" },
                { time: "10:00", icon: "ğŸ¥©", title: "æŒ½è‚‰èˆ‡ç±³ (æ‹¿æ•´ç†åˆ¸)", type: "highlight", desc: "ã€é¦–è¦ä»»å‹™ã€‘å‰å¾€ç¥‡åœ’åº—é ˜å–ç”¨é¤åˆ¸ã€‚", transport: "è¨ˆç¨‹è»Š (ç´„10åˆ†)", tips: "å‹™å¿…10é»å‰æŠµé”æ’éšŠã€‚æ‹¿åˆ°åˆ¸å¾Œï¼Œç©ºæª”å‰›å¥½å»æ°¸è§€å ‚ã€‚" },
                { time: "10:30", icon: "ğŸ", title: "æ°¸è§€å ‚ (ç¦ªæ—å¯º)", type: "sightseeing", desc: "äº¬éƒ½ç´…è‘‰ä¹‹ç‹ï¼Œå›é¦–é˜¿å½Œé™€ä½›ã€‚", transport: "è¨ˆç¨‹è»Š/æ­¥è¡Œ", tips: "å°±åœ¨ç¥‡åœ’é™„è¿‘ï¼Œæ­è¨ˆç¨‹è»Šä¸€ä¸‹å°±åˆ°ã€‚12æœˆåˆé›–æ˜¯è½è‘‰æœŸï¼Œä½†ã€Œç´…è‘‰åœ°æ¯¯ã€åˆ¥æœ‰ä¸€ç•ªé¢¨å‘³ã€‚" },
                { time: "12:30", icon: "ğŸ¥©", title: "æŒ½è‚‰èˆ‡ç±³ (åˆé¤)", type: "food", desc: "äº«å—ç¾çƒ¤æ¼¢å ¡æ’ (è¦–æ•´ç†åˆ¸æ™‚é–“èª¿æ•´)ã€‚", transport: "æ­¥è¡Œ", tips: "è‹¥æ™‚é–“å……è£•ï¼Œå¯æ…¢æ…¢èµ°å›ç¥‡åœ’ã€‚" },
                { time: "14:30", icon: "ğŸ¶", title: "åé…’é¤¨ã‚¿ã‚­ãƒ¢ãƒˆ", type: "food", desc: "ã€è²·é…’è¡Œç¨‹ã€‘å‰å¾€äº”æ¢é€šçš„ååº—ã€‚", transport: "è¨ˆç¨‹è»Š/å…¬è»Š", tips: "åˆé¤å¾Œç›´æ¥å»è²·é…’ã€‚é€™è£¡æœ‰è±å¯Œçš„è©¦é£²æ©Ÿã€‚" },
                { time: "16:00", icon: "ğŸ¨", title: "å›é£¯åº— Check-in", type: "logistic", desc: "æ”¾æˆ°åˆ©å“(é…’)ã€æ´—è‡‰ä¼‘æ¯ã€‚", transport: "åœ°éµï¼šäº”æ¢ âœ å››æ¢", tips: "é€™æ®µä¼‘æ¯éå¸¸é‡è¦ï¼é¤Šè¶³ç²¾ç¥æº–å‚™çœ‹å¤œæ¥“ã€‚" },
                { time: "17:30", icon: "ğŸŒ™", title: "æ±ç¦å¯º / æ±å¯º å¤œé–“é»ç‡ˆ", type: "highlight", desc: "ã€å¤œæ¥“äºŒé¸ä¸€ã€‘", transport: "åœ°éµ+äº¬é˜ª / è¨ˆç¨‹è»Š", tips: "æ±ç¦å¯ºéœ€é ç´„(æœ€å¾Œä¸€å¤©)ã€‚è‹¥æ²’é ç´„åˆ°ï¼Œæ”¹å»æ±å¯º(å…é ç´„)ã€‚" },
                { time: "20:00", icon: "ğŸ¥˜", title: "æ™šé¤ / å±…é…’å±‹", type: "food", desc: "é£¯åº—é™„è¿‘ç°¡å–®åƒæˆ–å±…é…’å±‹ã€‚", transport: "æ­¥è¡Œ", tips: "çµæŸå……å¯¦çš„ä¸€å¤©ã€‚" }
            ],
            day2: [
                { time: "09:30", icon: "ğŸ‚", title: "æ±æœ¬é¡˜å¯º & è¥¿æœ¬é¡˜å¯º", type: "sightseeing", desc: "ã€éŠ€æå·¡ç¦®ã€‘æ¬£è³å·¨å¤§çš„é‡‘é»ƒéŠ€æã€‚", transport: "åœ°éµï¼šå››æ¢ âœ äº¬éƒ½ç«™", tips: "æ—©ä¸Šæ‚ é–’åœ°çœ‹éŠ€æï¼Œè¥¿æœ¬é¡˜å¯ºçš„æ°´å¹éŠ€ææ˜¯ç¶“å…¸ã€‚" },
                { time: "12:00", icon: "ğŸ±", title: "åˆé¤ï¼šäº¬éƒ½è»Šç«™å‘¨é‚Š", type: "food", desc: "æ‹‰éºµå°è·¯æˆ–åœ°ä¸‹è¡—ï¼Œé¸æ“‡è±å¯Œã€‚", transport: "æ­¥è¡Œ", tips: "åƒé£½å¾Œæº–å‚™å‰å¾€ä¸‹ä¸€å€‹æ™¯é»ã€‚" },
                { time: "13:30", icon: "ğŸ¯", title: "äºŒæ¢åŸ (ä¸–ç•Œéºç”¢)", type: "sightseeing", desc: "ã€å¡«è£œç©ºæª”ã€‘æ¬£è³åº­åœ’èˆ‡éŠ€æã€‚", transport: "åœ°éµ/è¨ˆç¨‹è»Š", tips: "äºŒæ¢åŸé›¢é£¯åº—å¾ˆè¿‘ï¼ŒéŠ€æä¹Ÿå¾ˆç¾ï¼Œéå¸¸é©åˆåˆå¾Œæ•£æ­¥ã€‚" },
                { time: "16:00", icon: "ğŸ›ï¸", title: "éŒ¦å¸‚å ´ / å››æ¢æ²³åŸç”º", type: "sightseeing", desc: "é€›è¡—è³¼ç‰©ï¼Œè³¼è²·ä¼´æ‰‹ç¦®ã€‚", transport: "åœ°éµ/æ­¥è¡Œ", tips: "å›é£¯åº—é™„è¿‘ï¼Œé€›é€›å¤§ä¸¸ç™¾è²¨æˆ–éŒ¦å¸‚å ´ã€‚" },
                { time: "18:00", icon: "ğŸ¶", title: "SAKEå£± (Sake Ichi)", type: "food", desc: "ã€åœ°é…’å·¡ç¦®ã€‘ç«™ç«‹å¼æ¸…é…’é…’å§ã€‚", transport: "æ­¥è¡Œ", tips: "ä½æ–¼æ²³åŸç”º/æœ¨å±‹ç”ºï¼Œé›¢é£¯åº—ä¸é ã€‚æ°£æ°›è¼•é¬†ã€‚" },
                { time: "20:00", icon: "ğŸŒ™", title: "é´¨å·æ•£æ­¥ & æ™šé¤", type: "food", desc: "äº«å—äº¬éƒ½çš„å¤œæ™šã€‚", transport: "æ­¥è¡Œ", tips: "åœ¨å…ˆæ–—ç”ºæˆ–æœ¨å±‹ç”ºè¦“é£Ÿã€‚" }
            ],
            day3: [
                { time: "09:30", icon: "ğŸ§³", title: "é€€æˆ¿ & å‰å¾€æ¢…ç”°", type: "transport", desc: "å¸¶è‘—è¡Œææ­é˜ªæ€¥é›»è»Šã€‚", transport: "é˜ªæ€¥é›»è»Šï¼šçƒä¸¸ âœ å¤§é˜ªæ¢…ç”°", tips: "ç›´é”ä¸ç”¨è½‰è»Šï¼Œç´„ 45 åˆ†é˜ã€‚" },
                { time: "10:30", icon: "ğŸ‘œ", title: "å¯„æ”¾è¡Œæ", type: "logistic", desc: "é˜ªæ€¥ç™¾è²¨æ¢…ç”°æœ¬åº— 1F æœå‹™å°ã€‚", transport: "æ­¥è¡Œ", tips: "å¯„æ”¾è¡Œæå¾Œè¼•è£ä¸Šé™£ã€‚è‹¥æœå‹™å°å®¢æ»¿ï¼Œå‘¨é‚Šæœ‰è¨±å¤šç½®ç‰©æ«ƒã€‚" },
                { time: "11:30", icon: "ğŸ‚", title: "å¤§é˜ªåŸå…¬åœ’ (éŠ€æå¤§é“)", type: "sightseeing", desc: "æ¬£è³å£¯è§€çš„é‡‘é»ƒéŠ€æéš§é“ã€‚", transport: "JRç’°ç‹€ç·šï¼šå¤§é˜ª âœ æ£®ä¹‹å®®", tips: "å¾æ£®ä¹‹å®®ç«™å‡ºä¾†å°±æ˜¯å™´æ°´æ± å’ŒéŠ€æå¤§é“ï¼Œä¸ç”¨çˆ¬å¤©å®ˆé–£ã€‚" },
                { time: "13:00", icon: "ğŸš‡", title: "å‰å¾€é¤å»³", type: "transport", desc: "å¾å¤§é˜ªåŸç§»å‹•åˆ°æ—¥æœ¬æ©‹ã€‚", transport: "åœ°éµåƒæ—¥å‰ç·šï¼šæ£®ä¹‹å®® âœ æ—¥æœ¬æ©‹", tips: "ç›´é”ä¸ç”¨æ›è»Šï¼Œç´„ 10 åˆ†é˜ã€‚" },
                { time: "13:45", icon: "ğŸ®", title: "æ–°å®¿ç„¼è‚‰ ç‰›ãŸã‚“ã®æª¸æª¬", type: "food", desc: "ã€é ç´„ 14:00ã€‘å¤§é˜ªæœ¬åº—åˆé¤ã€‚", transport: "æ­¥è¡Œ", tips: "ä½æ–¼åƒæ—¥å‰ã€‚è«‹æº–æ™‚æŠµé”äº«å—åšåˆ‡ç‰›èˆŒã€‚" },
                { time: "15:30", icon: "ğŸ›ï¸", title: "æ¢…ç”°æœ€å¾Œè³¼ç‰© / é ˜è¡Œæ", type: "sightseeing", desc: "å›æ¢…ç”°é ˜å–è¡Œæã€‚", transport: "åœ°éµï¼šé›£æ³¢ âœ æ¢…ç”°", tips: "æ™‚é–“å……è£•å¯é€›é€›é˜ªæ€¥ç™¾è²¨åœ°ä¸‹è¡—è²·ä¼´æ‰‹ç¦®ã€‚" },
                { time: "17:30", icon: "ğŸšŒ", title: "å‰å¾€é—œè¥¿æ©Ÿå ´", type: "transport", desc: "æ­ä¹˜æ©Ÿå ´åˆ©æœ¨æ´¥å·´å£«ã€‚", transport: "æ–°é˜ªæ€¥é£¯åº—å‰ (æ¢…ç”°)", tips: "å°±åœ¨é˜ªæ€¥ç™¾è²¨å°é¢ï¼Œä¸ç”¨æ¬è¡Œæä¸Šä¸‹æ¨“æ¢¯ï¼Œæœ€è¼•é¬†çš„é¸æ“‡ã€‚" },
                { time: "18:45", icon: "ğŸ›«", title: "æŠµé”æ©Ÿå ´ (KIX)", type: "logistic", desc: "è¾¦ç†ç™»æ©Ÿï¼Œèˆªç­ 20:45 èµ·é£›ã€‚", transport: "-", tips: "å®Œç¾çš„æ—…ç¨‹çµæŸã€‚" }
            ]
        };

        // --- State Management ---
        let currentDay = 'day1';
        let selectedEventIndex = 0;

        // --- DOM Elements ---
        const dayContent = document.getElementById('day-content');
        const tipsContent = document.getElementById('tips-content');
        const timelineList = document.getElementById('timeline-list');
        const detailCard = document.getElementById('detail-card');
        const tabs = {
            day1: document.getElementById('tab-day1'),
            day2: document.getElementById('tab-day2'),
            day3: document.getElementById('tab-day3'),
            tips: document.getElementById('tab-tips')
        };

        // --- Initialization ---
        function init() {
            renderCharts();
            renderDay(currentDay);
        }

        // --- Functions ---
        function switchTab(tabId) {
            Object.keys(tabs).forEach(key => {
                const tab = tabs[key];
                if (key === tabId) {
                    tab.classList.remove('inactive-tab', 'hover:bg-stone-50');
                    tab.classList.add('active-tab');
                } else {
                    tab.classList.remove('active-tab');
                    tab.classList.add('inactive-tab', 'hover:bg-stone-50');
                }
            });

            if (tabId === 'tips') {
                dayContent.classList.add('hidden');
                tipsContent.classList.remove('hidden');
                tipsContent.classList.add('fade-in');
            } else {
                tipsContent.classList.add('hidden');
                dayContent.classList.remove('hidden');
                currentDay = tabId;
                renderDay(tabId);
            }
        }

        function renderDay(dayId) {
            const events = itineraryData[dayId];
            timelineList.innerHTML = ''; 

            events.forEach((event, index) => {
                const item = document.createElement('div');
                item.className = `timeline-item p-4 border-l-4 cursor-pointer hover:bg-stone-50 transition-colors flex items-start gap-3 ${index === 0 ? 'active border-l-red-600 bg-red-50' : 'border-l-stone-300'}`;
                item.onclick = () => selectEvent(index, dayId);
                
                item.innerHTML = `
                    <div class="font-mono text-sm text-stone-500 min-w-[50px] pt-1">${event.time}</div>
                    <div>
                        <div class="font-bold text-stone-800 text-lg">${event.icon} ${event.title}</div>
                        <div class="text-sm text-stone-500 truncate w-48 md:w-64">${event.desc}</div>
                    </div>
                `;
                timelineList.appendChild(item);
            });
            selectEvent(0, dayId);
        }

        function selectEvent(index, dayId) {
            const events = itineraryData[dayId];
            const event = events[index];
            const listItems = timelineList.children;
            for (let i = 0; i < listItems.length; i++) {
                if (i === index) {
                    listItems[i].classList.add('active', 'border-l-red-600', 'bg-red-50');
                    listItems[i].classList.remove('border-l-stone-300');
                } else {
                    listItems[i].classList.remove('active', 'border-l-red-600', 'bg-red-50');
                    listItems[i].classList.add('border-l-stone-300');
                }
            }

            let typeColor = 'bg-stone-100 text-stone-600';
            if (event.type === 'sightseeing') typeColor = 'bg-red-100 text-red-800';
            if (event.type === 'food') typeColor = 'bg-orange-100 text-orange-800';
            if (event.type === 'transport') typeColor = 'bg-blue-100 text-blue-800';
            if (event.type === 'highlight') typeColor = 'bg-yellow-100 text-yellow-800 border border-yellow-200';

            detailCard.innerHTML = `
                <div class="w-full h-full flex flex-col items-start text-left animate-fade-in space-y-4">
                    <div class="flex items-center justify-between w-full border-b border-stone-100 pb-2">
                        <span class="text-3xl">${event.icon}</span>
                        <span class="px-3 py-1 rounded-full text-xs font-bold uppercase ${typeColor}">${getCategoryName(event.type)}</span>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold text-stone-800">${event.title}</h2>
                        <div class="text-lg text-stone-600 mt-1 font-mono">${event.time}</div>
                    </div>
                    <p class="text-stone-700 leading-relaxed text-lg bg-stone-50 p-4 rounded-lg w-full">
                        ${event.desc}
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full mt-2">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-100">
                            <h4 class="font-bold text-blue-800 text-sm mb-1">ğŸš† äº¤é€šå»ºè­°</h4>
                            <p class="text-sm text-blue-900">${event.transport}</p>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                            <h4 class="font-bold text-yellow-800 text-sm mb-1">ğŸ’¡ è²¼å¿ƒå°æé†’</h4>
                            <p class="text-sm text-yellow-900">${event.tips}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function getCategoryName(type) {
            const map = {
                'transport': 'äº¤é€šç§»å‹•',
                'sightseeing': 'æ™¯é»è§€å…‰',
                'food': 'ç¾é£Ÿ / è³¼ç‰©',
                'logistic': 'ä½å®¿ / æ©Ÿå ´',
                'highlight': 'è¡Œç¨‹äº®é»'
            };
            return map[type] || 'æ´»å‹•';
        }

        function renderCharts() {
            const ctxDistribution = document.getElementById('tripDistributionChart').getContext('2d');
            new Chart(ctxDistribution, {
                type: 'doughnut',
                data: {
                    labels: ['æ™¯é»è§€å…‰', 'äº¤é€šç§»å‹•', 'ç¾é£Ÿè³¼ç‰©', 'ä½å®¿èˆ‡æ©Ÿå ´'],
                    datasets: [{
                        data: [13, 5, 8, 4], 
                        backgroundColor: ['#b91c1c', '#60a5fa', '#f87171', '#a8a29e'],
                        borderWidth: 0
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'right' } } }
            });
        }

        init();
    </script>
</body>
</html>
